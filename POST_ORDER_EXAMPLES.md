# How to Create POST Requests for New Orders

## API Endpoint
```
POST http://localhost:8080/api
Content-Type: application/json
```

## JSON Request Body Format

### Basic Order Structure
```json
{
  "restaurantType": "PIZZA_RESTAURANT",
  "orderItems": [
    {
      "name": "Margherita Pizza",
      "price": 14.99,
      "description": "Fresh tomatoes, mozzarella, and basil",
      "quantity": 2
    },
    {
      "name": "Garlic Bread",
      "price": 6.99,
      "description": "Fresh baked bread with garlic butter",
      "quantity": 1
    }
  ],
  "status": "ORDERED"
}
```

## Complete Examples

### 1. Pizza Restaurant Order
```json
{
  "restaurantType": "PIZZA_RESTAURANT",
  "orderItems": [
    {
      "name": "Margherita Pizza",
      "price": 14.99,
      "description": "Fresh tomatoes, mozzarella, and basil",
      "quantity": 2
    },
    {
      "name": "Pepperoni Pizza", 
      "price": 16.99,
      "description": "Pepperoni and mozzarella cheese",
      "quantity": 1
    }
  ],
  "totalAmount": 46.97,
  "status": "ORDERED"
}
```

### 2. Steak Restaurant Order
```json
{
  "restaurantType": "STEAK_RESTAURANT",
  "orderItems": [
    {
      "name": "Ribeye Steak",
      "price": 32.99,
      "description": "12oz prime ribeye grilled to perfection",
      "quantity": 1
    },
    {
      "name": "Caesar Salad",
      "price": 12.99,
      "description": "Crisp romaine with parmesan and croutons", 
      "quantity": 1
    }
  ],
  "totalAmount": 45.98,
  "status": "ORDERED"
}
```

### 3. Pasta Restaurant Order
```json
{
  "restaurantType": "PASTA_RESTAURANT",
  "orderItems": [
    {
      "name": "Spaghetti Carbonara",
      "price": 16.99,
      "description": "Spaghetti with bacon, eggs, and parmesan",
      "quantity": 1
    },
    {
      "name": "Tiramisu",
      "price": 8.99,
      "description": "Classic Italian dessert",
      "quantity": 2
    }
  ],
  "totalAmount": 34.97,
  "status": "ORDERED"
}
```

## HTTP Request Examples

### Using cURL
```bash
# Pizza Order
curl -X POST http://localhost:8080/api \
  -H "Content-Type: application/json" \
  -d '{
    "restaurantType": "PIZZA_RESTAURANT",
    "orderItems": [
      {
        "name": "Margherita Pizza",
        "price": 14.99,
        "description": "Fresh tomatoes, mozzarella, and basil",
        "quantity": 2
      }
    ],
    "totalAmount": 29.98,
    "status": "ORDERED"
  }'
```

### Using JavaScript (Frontend)
```javascript
const orderData = {
  restaurantType: "PIZZA_RESTAURANT",
  orderItems: [
    {
      name: "Margherita Pizza",
      price: 14.99,
      description: "Fresh tomatoes, mozzarella, and basil",
      quantity: 2
    }
  ],
  totalAmount: 29.98,
  status: "ORDERED"
};

fetch('http://localhost:8080/api', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(orderData)
})
.then(response => {
  if (response.ok) {
    console.log('Order created successfully!');
    return response.status; // Returns 201 for created
  } else {
    throw new Error('Failed to create order');
  }
})
.catch(error => {
  console.error('Error:', error);
});
```

### Using Postman
1. **Method:** POST
2. **URL:** `http://localhost:8080/api`
3. **Headers:** 
   - Key: `Content-Type`, Value: `application/json`
4. **Body:** Select "raw" and "JSON", then paste:
```json
{
  "restaurantType": "PIZZA_RESTAURANT",
  "orderItems": [
    {
      "name": "Margherita Pizza",
      "price": 14.99,
      "description": "Fresh tomatoes, mozzarella, and basil",
      "quantity": 1
    }
  ],
  "status": "ORDERED"
}
```

## Field Requirements

### Required Fields:
- `restaurantType`: Must be one of:
  - `"PIZZA_RESTAURANT"`
  - `"STEAK_RESTAURANT"`  
  - `"PASTA_RESTAURANT"`
- `orderItems`: Array of order items (can be empty)

### Optional Fields:
- `id`: Will be auto-generated by backend
- `totalAmount`: Will be calculated if not provided
- `status`: Will default to "ORDERED" if not provided
- `orderDate`: Will be set to current time if not provided

### OrderItem Structure:
```json
{
  "name": "Item Name",
  "price": 12.99,
  "description": "Item description",
  "quantity": 1
}
```

## Response

### Success Response (201 Created):
```
Status: 201 Created
```

### Error Responses:
- **400 Bad Request**: Invalid JSON or missing required fields
- **500 Internal Server Error**: Server error

## Important Notes

1. **Restaurant Type**: Must exactly match the enum values in your backend
2. **Price Format**: Use decimal numbers (e.g., 14.99)
3. **Quantity**: Integer value for each order item
4. **Status**: Will automatically be set to "ORDERED" and can progress through your state machine
5. **ID**: Don't include an ID in the request - it will be generated by the backend
6. **Date**: OrderDate will be automatically set to current timestamp

## Testing Your API

You can test the order creation using any of these tools:
- **cURL** (command line)
- **Postman** (GUI tool)
- **Your React frontend** (already integrated)
- **Browser fetch()** (developer console)

## Integration with State Machine

Once an order is created:
1. It starts in `ORDERED` status
2. You can use the state machine endpoints to progress it:
   - `PUT /api/{id}/progress` - Move to next state
   - `PUT /api/{id}/cancel` - Cancel the order
   - `GET /api/{id}/can-progress` - Check if progression is allowed

Your OrderDetailsDTO is now complete with proper JSON serialization support!
